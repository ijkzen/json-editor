<div mat-dialog-title class="flex items-center gap-2">
    <mat-icon class="text-slate-600">tune</mat-icon>
    <div class="min-w-0 flex-1">
        <div class="font-semibold leading-6">识别设置</div>
        <div class="text-xs text-slate-500">控制树状视图中的自动识别与增强展示。</div>
    </div>
</div>

<mat-divider />

<div mat-dialog-content class="min-w-[min(600px,92vw)] py-4">
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
        <div class="rounded-lg border border-slate-200 bg-white px-3 py-2">
            <mat-slide-toggle class="w-full" [checked]="settings.phone()" (change)="settings.phone.set($event.checked)">
                <span class="font-medium">手机号识别</span>
                <span class="block text-xs text-slate-500">数字/字符串中识别 PHONE 标签</span>
            </mat-slide-toggle>
        </div>

        <div class="rounded-lg border border-slate-200 bg-white px-3 py-2">
            <mat-slide-toggle class="w-full" [checked]="settings.time()" (change)="settings.time.set($event.checked)">
                <span class="font-medium">时间识别</span>
                <span class="block text-xs text-slate-500">秒/毫秒时间戳、ISO 时间（东 8 区展示）</span>
            </mat-slide-toggle>

            @if (settings.time()) {
            <div class="mt-2 flex items-center justify-between gap-3">
                <div class="text-xs text-slate-500">展示格式化时间</div>
                <mat-slide-toggle [checked]="settings.timeShowFormatted()"
                    (change)="settings.timeShowFormatted.set($event.checked)" aria-label="SHOW FORMATTED TIME" />
            </div>
            }
        </div>

        <div class="rounded-lg border border-slate-200 bg-white px-3 py-2">
            <mat-slide-toggle class="w-full" [checked]="settings.email()" (change)="settings.email.set($event.checked)">
                <span class="font-medium">EMAIL 识别</span>
                <span class="block text-xs text-slate-500">识别 EMAIL 标签并支持 MAILTO</span>
            </mat-slide-toggle>
        </div>

        <div class="rounded-lg border border-slate-200 bg-white px-3 py-2">
            <mat-slide-toggle class="w-full" [checked]="settings.link()" (change)="settings.link.set($event.checked)">
                <span class="font-medium">LINK 识别</span>
                <span class="block text-xs text-slate-500">识别网址并支持新标签页打开</span>
            </mat-slide-toggle>
        </div>

        <div class="rounded-lg border border-slate-200 bg-white px-3 py-2 sm:col-span-2">
            <mat-slide-toggle class="w-full" [checked]="settings.color()" (change)="settings.color.set($event.checked)">
                <span class="font-medium">COLOR 识别</span>
                <span class="block text-xs text-slate-500">识别颜色值并展示色块标签</span>
            </mat-slide-toggle>

            @if (settings.color()) {
            <div class="mt-2 flex items-center gap-3 whitespace-nowrap overflow-x-auto">
                <div class="text-xs text-slate-500 shrink-0 leading-8">颜色格式</div>
                <mat-button-toggle-group class="settings-color-format !h-8 shrink-0" [value]="settings.colorFormat()"
                    (change)="settings.colorFormat.set($event.value)" aria-label="COLOR FORMAT">
                    <mat-button-toggle value="rgba" class="!text-xs">RGBA</mat-button-toggle>
                    <mat-button-toggle value="argb" class="!text-xs">ARGB</mat-button-toggle>
                </mat-button-toggle-group>
            </div>
            }
        </div>
    </div>

    <div class="mt-3 text-xs text-slate-400">
        提示：设置会自动保存到本地浏览器。
    </div>
</div>

<div mat-dialog-actions align="end" class="px-6 pb-4">
    <button mat-stroked-button type="button" mat-dialog-close>完成</button>
</div>